<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="icon" href="images/vxnhe-icon.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/styles/librarian-role.css">
    <link rel="stylesheet" href="/styles/footer.css"/>
    <link rel="stylesheet" href="/styles/swiper-bundle.min.css">
    <link rel="stylesheet" href="/styles/borrow.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        #datePicker {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px 0px rgba(0,0,0,0.1);
        }
    </style>
    <title>Request page</title>
</head>
<body>
    <%- include('./partials-librarian/nav-librarian.ejs')%>
    <% if (error) { %>
        <div class="alert alert-danger">
            <li><%= error %></li>
        </div>
    <% } %>
    <div class="profile-section">
        <!-- Profile Image -->
        <img src="<%= request.reader.profilePicture %>" alt="Profile Image" class="profile-image">

        <!-- Profile Details (2 Column) -->
        <div class="profile-details">
            <h1 class="profile-name"><%= request.reader.username %></h1>
            <h1 class="profile-extra"><%= request.reader.gmail %></h1>

            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-2 gap-10 pb-10">
              <!-- Card Holder 1 -->
              <div class="p-4 rounded-md" id="extra-reader-info">
                <div class=" w-10 h-10 mx-auto mb-4">
                  <img src="/images/phone-solid.svg" alt="Image 1" class="w-full h-full">
                </div>
                <h3 class="text-xl font-bold mb-2 text-center">Contact number</h3>
                <p class="text-center">0123456789</p>
              </div>
              <div class="p-4 rounded-md" id="extra-reader-info">
                <div class=" w-10 h-10 mx-auto mb-4">
                  <img src="/images/cake-candles-solid.svg" alt="Image 1" class="w-full h-full">
                </div>
                <h3 class="text-xl font-bold mb-2 text-center">Date of birth</h3>
                <p class="text-center">29/08/2004</p>
              </div>
              <div class="p-4 rounded-md" id="extra-reader-info">
                <div class=" w-10 h-10 mx-auto mb-4">
                  <img src="/images/right-to-bracket-solid.svg" alt="Image 1" class="w-full h-full">
                </div>
                <h3 class="text-xl font-bold mb-2 text-center">Member since</h3>
                <p class="text-center">1/12/2023</p>
              </div>
              <div class="p-4 rounded-md" id="extra-reader-info">
                <div class=" w-10 h-10 mx-auto mb-4">
                  <img src="/images/book-bookmark-solid.svg" alt="Image 1" class="w-full h-full">
                </div>
                <h3 class="text-xl font-bold mb-2 text-center">Books borrowed</h3>
                <p class="text-center">63 books</p>
              </div>
              
            </div>
        </div>
    </div>
    <div class="triangle-line">
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <div class="triangle"></div>
      <!-- Add more triangles as needed -->
  </div>
    <!-- Extra Description Section -->
    <div class="extra-description">
        <h2 class="sect-header2">Borrow Details</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 xl:grid-cols-3 gap-10 pb-10">
          <!-- Card Holder 1 -->
          <div class="p-4 rounded-md" id="extra-information">
            <div class=" w-10 h-10 mx-auto mb-4">
              <img src="/images/calendar-days-regular.svg" alt="Image 1" class="w-full h-full">
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Pickup date</h3>
            <p class="text-center">22/12/2023</p>
          </div>
          <div class="p-4 rounded-md" id="extra-information">
            <div class=" w-10 h-10 mx-auto mb-4">
              <img src="/images/calendar.svg" alt="Image 1" class="w-full h-full">
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Pickup date</h3>
            <p class="text-center">10/1/2024</p>
          </div>
          <div class="p-4 rounded-md" id="extra-information">
            <div class=" w-10 h-10 mx-auto mb-4">
              <img src="/images/clock-solid.svg" alt="Image 1" class="w-full h-full">
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Duration</h3>
            <p class="text-center">20 days</p>
          </div>
          <div class="p-4 rounded-md" id="extra-information">
            <div class=" w-10 h-10 mx-auto mb-4">
              <img src="/images/book-solid.svg" alt="Image 1" class="w-full h-full">
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Books number</h3>
            <p class="text-center">3 books total</p>
          </div>
          <div class="p-4 rounded-md" id="extra-information">
            <div class=" w-10 h-10 mx-auto mb-4">
              <img src="/images/map-location-dot-solid.svg" alt="Image 1" class="w-full h-full">
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Pickup Location</h3>
            <p class="text-center">Library 1</p>
          </div>
          <div class="p-4 rounded-md" id="extra-information">
            <div class=" w-10 h-10 mx-auto mb-4">
              <img src="/images/ellipsis-solid.svg" alt="Image 1" class="w-full h-full">
            </div>
            <h3 class="text-xl font-bold mb-2 text-center">Borrow status</h3>
            <p class="text-center">Waiting for approve</p>
          </div>

        </div>
    </div>
    <div class="triangle-line">
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <div class="triangle-flip"></div>
      <!-- Add more triangles as needed -->
  </div>
<div class="borrowing-cont">
  <h1 class="sect-header">Borrwing books</h1>
  <div class="container swiper">
    <div class="slide-container">
      <div class="card-wrapper swiper-wrapper">
        <% request.books.forEach(book => { %>
            <li class="card swiper-slide">
                <label onclick="window.location.href='/librarian/book_detail/<%= book._id %>'">
                    <div class="image-box">
                        <img src="/<%= book.cover_1 %>" alt="" />
                      </div>
                      <div class="profile-details">
                        <h1><%= book.title %></h1>
                        <h2><%= book.author %></h2>
                      </div>
                </label>
            </li>
        <% }); %>
        
      </div>
    </div>
    <div class="swiper-button-next swiper-navBtn"></div>
    <div class="swiper-button-prev swiper-navBtn"></div>
    <div class="swiper-pagination"></div>
  </div>
</div>
<div class="interact-buttons">
  <button id="decline">Decline this borrow</button>
  <button id="accept">Accept this borrow</button>
</div>
</div>
    
        <% if (request.status === 'Pending') { %>
            <button id="acceptBtn" class="btn btn-success">Accept</button>
            
            <form action="/librarian/request/decline/<%= request._id %>" method="POST">
                <textarea name="declineReason" id="declineReason" cols="30" rows="10"></textarea>
                <button id="declineBtn" class="btn btn-danger">Decline</button>
            </form>
        
            <form action="/librarian/request/accept/<%= request._id %>" method="POST" id="datePicker">
                <button type="button" id="closeBtn" style="float: right;">X</button>
        
                <ul>
                    <% request.books.forEach(book => { %>
                        <li>
                            <input type="checkbox" name="approved" id="approved" value="<%= book._id %>">
                            <p>Title: <%= book.title %></p>
                        </li>
                    <% }); %>
                </ul>
        
                <label for="takeDate">Choose a date:</label>
                <input type="date" id="takeDate" name="takeDate">
                <button id="confirmDateBtn" class="btn btn-primary">Confirm creation</button>
            </form>
        <% } %>
    </div>

    <%- include("../partials_readers/footer.ejs") %>
    <script>
        document.getElementById("acceptBtn").addEventListener("click", function(event){
            // Prevent the form from being submitted
            event.preventDefault();

            // Display the datePicker div
            document.getElementById("datePicker").style.display = "block";
        });

        document.getElementById("closeBtn").addEventListener("click", function() {
        // Hide the datePicker div
            document.getElementById("datePicker").style.display = "none";
        });
    </script>
    <script src="/js/swiper-bundle.min.js"></script>
    <script src="/js/general-slider.js"></script>
</body>
</html>
